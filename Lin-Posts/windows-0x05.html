<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>windows-0x05</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="https://linarena.com/favicon.ico" >
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="LIN ARENA Technology Blog" />
    <link rel="shortcut icon" href="/" type="image/png" />
    <link rel="canonical" href="/windows-0x05" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="LIN ARENA" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="windows-0x05" />
    <meta property="og:description" content="0x05 GS What is GS? GS는 STACK Cookie, Canary로도 불리는 메모리 보호 기법입니다. 이 GS는 BOF를 방어하기 위해 나온 기법 중 하나로, 함수가 시작될 때 STACK에 4 byte를 넣어놓고 함수가 종료될 때 이 4 byte가 변조되었는지 확인합니다. 만약 이 STACK Cookie가 처음과 다르다면, 프로그램은 바로 종료되어 버립니다. 아래 그림은 STACK" />
    <meta property="og:url" content="/windows-0x05" />
    <meta property="og:image" content="/assets/images/windows/test.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2019-03-09T19:18:00+09:00" />
    <meta property="article:modified_time" content="2019-03-09T19:18:00+09:00" />
    <meta property="article:tag" content="Posts" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="windows-0x05" />
    <meta name="twitter:description" content="0x05 GS What is GS? GS는 STACK Cookie, Canary로도 불리는 메모리 보호 기법입니다. 이 GS는 BOF를 방어하기 위해 나온 기법 중 하나로, 함수가 시작될 때 STACK에 4 byte를 넣어놓고 함수가 종료될 때 이 4 byte가 변조되었는지 확인합니다. 만약 이 STACK Cookie가 처음과 다르다면, 프로그램은 바로 종료되어 버립니다. 아래 그림은 STACK" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/windows/test.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="LIN ARENA" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Posts" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "LIN ARENA",
        "logo": "/"
    },
    "url": "/windows-0x05",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/windows/test.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/windows-0x05"
    },
    "description": "0x05 GS What is GS? GS는 STACK Cookie, Canary로도 불리는 메모리 보호 기법입니다. 이 GS는 BOF를 방어하기 위해 나온 기법 중 하나로, 함수가 시작될 때 STACK에 4 byte를 넣어놓고 함수가 종료될 때 이 4 byte가 변조되었는지 확인합니다. 만약 이 STACK Cookie가 처음과 다르다면, 프로그램은 바로 종료되어 버립니다. 아래 그림은 STACK"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="windows-0x05" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://linarena.github.io/">LIN ARENA</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-Posts" role="menuitem"><a href="/tag/posts/">Posts</a></li>
    <!--<li class="nav-try-ghost" role="menuitem"><a href="https://ghost.org">Try Ghost</a></li>-->
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-windows ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 March 2019"> 9 March 2019</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/posts/'>POSTS</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">windows-0x05</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/windows/test.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h1 id="0x05-gs">0x05 GS</h1>

<h5 id="what-is-gs">What is GS?</h5>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_1.png" alt="[그림 1-1]" />
</figure>

<p>GS는 STACK Cookie, Canary로도 불리는 메모리 보호 기법입니다.</p>

<p>이 GS는 BOF를 방어하기 위해 나온 기법 중 하나로, 함수가 시작될 때 STACK에 4 byte를 넣어놓고 함수가 종료될 때 이 4 byte가 변조되었는지 확인합니다.</p>

<p>만약 이 STACK Cookie가 처음과 다르다면, 프로그램은 바로 종료되어 버립니다.</p>

<p>아래 그림은 STACK Cookie가 적용되고 검사하는 과정을 나타냅니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_2.png" alt="[그림 1-2]" />
</figure>

<p>STACK BOF는 반드시 Buffer의 시작 주소부터 덮기 시작하여 RET를 변조하는 것이기 때문에 GS를 정확하게 똑같이 입력하지 않으면 BOF 공격을 성공할 수가 없죠.</p>

<p>STACK Cookie는 고정된 값으로 넣어줄 수도 있지만, 값을 랜덤하게 넣거나, 첫 바이트를 Null로 넣어주는 방식도 있습니다.</p>

<p>따라서, BOF 공격을 방어하기 위한 아주 효과적인 방법이라고 볼 수 있습니다.</p>

<p>그렇다면 이 메모리 기법은 어떻게 우회를 할 수 있을까요??</p>

<p>이 기법을 우회하기 위해서는 Window의 Error Handlering에 대한 지식이 필요합니다.</p>

<h5 id="structured-error-handling">Structured Error Handling</h5>

<p>구조적 예외처리(이하 SEH)는 윈도우 운영 체제 특성에 기반한 예외 처리 매커니즘입니다.</p>

<p>이 SEH는 Thread별로 독립적으로 설치되고 운영되는 특징이 있습니다.</p>

<p>쉽게 이야기를 해보자면..프로그램이 좀 더 안정적으로 돌아갈 수 있도록 에러가 발생했을 때, 처리를 담당하는 역할을 맡고 있다고 생각하시면 되겠습니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_3.png" alt="[그림 1-3]" />
</figure>

<p>위 그림은 SEH의 구조와 동작을 표현한 내용입니다. 뭔가 좀 복잡해보이죠??</p>

<p>하나씩 설명해보도록 할게요.</p>

<p>프로그램이 실행되다가 에러가 발생하면 FS(=Segment Register)의 0번지의 값을 참조해서 TIB의 Exception_Register라는 값을 찾습니다.</p>

<p>여기에는 컴파일러가 미리 등록해놓은 에러 처리를 위한 Handler의 주소가 담겨있는데 이를 참조해서 Handler를 호출합니다.</p>

<p>만약 에러가 해결되지 않는다면 다음 Handler를 호출하는 방식으로 구현되어 있습니다.</p>

<p>만약 이 Handler가 발생한 에러를 위한 Handler가 맞다면 실행되고 아니면 *next SEH Record를 참조하여 다음 Handler를 실행하러 갑니다.</p>

<p>그런데 이 과정이 무한 반복이 되면 안되겠죠? 이 과정은 *next SEH Record의 값이 0xffffffff가 될 때까지만 진행이 되고</p>

<p>만약 0xffffffff가 된다면 Default Exception Handler를 호출하게 됩니다.</p>

<p>간단하쥬?</p>

<p>다음 그림을 통해 NSEH와 SEH의 구조를 살펴보겠습니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_4.png" alt="[그림 1-4]" />
</figure>

<p>위 그림처럼 EXCEPTION_RECORD는 _next와 _handler로 구성되어 있습니다.</p>

<p>위에서 이미 설명했듯이 _next는 다음 EXCEPTION_RECORD의 위치를 담고 있습니다.</p>

<p>_handler는 실제로 에러 처리 과정을 실행할 함수이고, 구조는 아래와 같습니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_5.png" alt="[그림 1-5]" />
</figure>

<p>위 함수 구조와 같이 에러 처리 함수는 4개의 인자를 필요로 하며, 함수 실행 시 실행에 필요한 인자들을 STACK에 구성합니다.</p>

<p>따라서 에러 처리 함수가 동작되면 STACK 구조는 아래처럼 구성됩니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_6.png" alt="[그림 1-6]" />
</figure>

<p>이 중 우리가 공격에서 유용하게 사용할 값이 EstablierFrame입니다. EstablierFrame은 이전 Frame의 주소를 가지고 있습니다.</p>

<p>이게 왜 중요할까요?</p>

<p>다음에서 우회 기법을 설명하며 EstablierFrame 값이 왜 중요한지 같이 알아보겠습니다.</p>

<h5 id="seh-overwrite">SEH Overwrite</h5>

<p>우리는 지금까지 GS와 SEH의 개념을 살펴보았습니다.</p>

<p>STACK Cookie를 우호하는데 왜 SEH의 개념이 필요할까요??</p>

<p>GS가 적용되면 함수 시작 시, 특정 4Byte를 넣고 함수가 종료될 때 4Byte를 검사한다고 했습니다.</p>

<p>이를 우회하려면? 반드시 4Byte를 알아내서 동일하게 적어줘야겠죠?</p>

<p>그런데 이 STACK Cookie를 검사하기 전에 프로그램에 치명적인 에러가 발생한다면 어떻게 될까요?</p>

<p>윈도우는 이 에러를 먼저 처리하려고 하겠죠???</p>

<p>이 점을 이용하는 겁니다. 지금부터 이 점을 이용해서 STACK Cookie 검사 과정을 우회할 것 입니다.</p>

<p>어떻게 할 것이냐? 저는 STACK의 끝까지 더미 값을 넣어서 할당된 STACK 공간 밖에 값을 쓰도록 Payload를 구성할 겁니다.</p>

<p>그러면? 반드시 에러가 발생하겠죠??</p>

<p>에러가 발생하면 윈도우의 SEH 과정이 실행됩니다.</p>

<p>지금까지 이야기한 것을 STACK으로 표현하면 다음과 같습니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_7.png" alt="[그림 1-7]" />
</figure>

<p>위 그림을 살펴보면 _next는 Jump to Shellcode, _handler는 &amp; pop pop ret으로 되어 있죠?</p>

<p>그리고 아래 STACK Frame에 EstablierFrame도 빨간 색으로 표현되어 있네요.</p>

<p>먼저, EstablierFrame은 이전 Frame의 _next의 주소를 담고 있습니다.</p>

<p>_handler가 실행되면서 자체적으로 새로운 Frame을 생성하는데 이 함수의 인자 중 하나가 이전 Frame의 주소를 가지고 있으니까</p>

<p>다시 원래 Frame으로 돌아가서 Shellcode를 실행하도록 만들자는 것이죠.</p>

<p>그래서 _handler에는 &amp; pop pop ret를 넣어줬습니다.</p>

<p>함수의 프롤로그 과정을 잘 떠올려보세요. 그럼 _handler가 실행될 때의 ESP는 그림에서 가장 아래에 있을 것이고</p>

<p>+8 위치에 EstablierFrame가 있죠? 그래서 &amp; pop pop ret을 넣어주는 것입니다.</p>

<p>&amp; pop pop ret이 실행되면?? _next로 오겠죠?</p>

<p>그럼 이제 남은 것은 _next에서 Shellcode가 얼마나 떨어져있는지 계산해서 jump code를 구성해주면 됩니다.</p>

<p>해당 그림에서는 바로 뒤에 Shellcode를 위치시켰습니다.</p>

<p>그래서 뛰어 넘을 거리는 6Byte!</p>

<p>4Byte가 아니냐구요? jump 0x06을 기계어로 바꾸면 06 eb가 됩니다. 2 byte짜리 명령어에요.</p>

<p>그래서 90 90 06 eb로 구성합니다. 그럼 90 90과 &amp; pop pop ret을 뛰어넘어야 하니까 6byte 맞죠?</p>

<p>아래 그림은 Immunity Debugger를 이용해서 우회 과정을 살펴본 것입니다.</p>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_8.png" alt="[그림 1-8]" />
</figure>

<figure>
  <img data-action="zoom" src="/assets/images/windows/0x05_9.png" alt="[그림 1-9]" />
</figure>

<p>우회가 잘 되죠??</p>

<p>지금까지 GS에 대한 설명을 했습니다. 다음 연재에서는 Safe SEH 기법에 대해 설명하겠습니다.</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/CI_Logo.jpg" alt="Joel" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/Joel">Joel Park</a></h4>
                                
                                    <p>psh@linarena.com</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/Joel">Read More</a>
                        </div>
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/lin_logo.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; LIN ARENA &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/posts/">Posts</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/android-0x00">mobile-0x00</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/linux_0x03">linux_0x03</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/web-0x02">web-0x02</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/posts/">
                                
                                    See all 13 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/web-0x02">
                <div class="post-card-image" style="background-image: url(/assets/images/web/sky.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/web-0x02">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Posts</span>
                            
                        
                    

                    <h2 class="post-card-title">web-0x02</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/windows-0x04">
                <div class="post-card-image" style="background-image: url(/assets/images/windows/0x04_3.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/windows-0x04">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Posts</span>
                            
                        
                    

                    <h2 class="post-card-title">windows-0x04</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/CI_Logo.jpg" alt="Joel Park" />
                        
                        <span class="post-card-author">
                            <a href="/author/Joel/">Joel Park</a>
                        </span>
                    
                
                    
                
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
            <span>LIN ARENA</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">windows-0x05</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=windows-0x05&amp;url=https://jekyller.github.io/jasper2/windows-0x05"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://jekyller.github.io/jasper2/windows-0x05"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">LIN ARENA</a> &copy; 2019</section>
                <section class="poweredby">All rights reserved. Powered by GitHub Pages.</section>
                <nav class="site-footer-nav">
                    <a href="/">[Latest Posts]</a>
                    <a href="https://linarena.com/" target="_blank" rel="noopener">[LIN ARENA HOMEPAGE]</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
